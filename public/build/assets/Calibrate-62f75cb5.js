import{P as U,E as D,r as n,a,F as v,j as s,g as I,n as K}from"./app-8abb3b0e.js";import{N as O,J as Q}from"./Navbar-7fa30fdf.js";import $ from"./Footer-131286c3.js";window.Pusher=U;window.Echo=new D({broadcaster:"pusher",key:"45d39f4664c31a6e0645",cluster:"ap1",forceTLS:!0});const q=({notif:d})=>{const[u,L]=n.useState("ph"),[r,N]=n.useState(3),[M,G]=n.useState(15),[m,J]=n.useState(""),[Z,x]=n.useState(0),[_,y]=n.useState(0),[aa,C]=n.useState(0),[ea,S]=n.useState(0),[la,k]=n.useState(0),[p,F]=n.useState(),[f,j]=n.useState();window.Echo.channel("Sensor-Event").listen("SensorEvent",l=>{J(l.message)});const[t,w]=n.useState([{id:1,real:"",analog:""},{id:2,real:"",analog:""},{id:3,real:"",analog:""},{id:4,real:"",analog:""},{id:5,real:"",analog:""},{id:6,real:"",analog:""},{id:7,real:"",analog:""},{id:8,real:"",analog:""},{id:9,real:"",analog:""},{id:10,real:"",analog:""},{id:11,real:"",analog:""},{id:12,real:"",analog:""},{id:13,real:"",analog:""},{id:14,real:"",analog:""},{id:15,real:"",analog:""}]),b=l=>{L(l),w([{id:1,real:"",analog:""},{id:2,real:"",analog:""},{id:3,real:"",analog:""},{id:4,real:"",analog:""},{id:5,real:"",analog:""},{id:6,real:"",analog:""},{id:7,real:"",analog:""},{id:8,real:"",analog:""},{id:9,real:"",analog:""},{id:10,real:"",analog:""},{id:11,real:"",analog:""},{id:12,real:"",analog:""},{id:13,real:"",analog:""},{id:14,real:"",analog:""},{id:15,real:"",analog:""}]),x(0),y(0),C(0),S(0),k(0),F(0),j(0)},H=()=>{N(r+1)};console.log("socket : ",m);const V=()=>{const l=t.map(e=>e.id===r?{...e,real:"",analog:""}:e);w(l),N(r-1)},[P,g]=n.useState(""),A=l=>{const e=u;e=="ph"&&g(parseFloat(m.aPH)),e=="tds"&&g(parseFloat(m.aTDS)),e=="suhu"&&g(parseFloat(m.aSUHU)),e=="sal"&&g(parseFloat(m.aSAL)),e=="amo"&&g(parseFloat(m.aAMO));const i=t.map(o=>o.id===l?{...o,analog:P}:o);w(i)},B=(l,e)=>{const i=parseFloat(l.target.value),o=t.map(h=>h.id===e?{...h,real:i}:h);w(o)},R=()=>{const l=[];for(let e=0;e<r;e++)l.push(a(v,{children:a("div",{className:"col-span-1 w-full mb-3 ",children:s("div",{className:" flex justify-between items-center w-full",children:[a("label",{className:"label",children:s("span",{className:"label-text",children:["Current Value ",e+1," : "]})}),s("div",{className:"formm flex gap-2",children:[a("input",{type:"number",placeholder:"input current value",className:"input input-ghost input-bordered w-full max-w-xs",value:t[e].real,onChange:i=>B(i,e+1)}),t[e].analog?a("div",{className:"analog p-3 lg:w-36 text-center bg-navy rounded-md text-gray-50",children:t[e].analog}):null,a("button",{className:(t[e].analog!="","btn btn-circle btn-outline-yellow"),onClick:()=>A(e+1),children:a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:a("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})})})]})]})})}));return l},[T,E]=n.useState(!1),W=()=>{E(!1)},X=()=>{let l=0,e=0,i=0,o=0,h=0;for(let c=0;c<r;c++)l+=t[c].analog,e+=t[c].real,i+=t[c].real*t[c].analog,o+=t[c].analog*t[c].analog,h+=t[c].real*t[c].real;x(l),y(e),C(i.toFixed(8)),S(o.toFixed(8)),k(h.toFixed(8)),F(((e*o-l*i)/(r*o-Math.pow(l,2))).toFixed(8)),j(((r*i-l*e)/(r*o-Math.pow(l,2))).toFixed(8)),E(!0)},Y=()=>{const l={calibrate:u,a:p,b:f};I.post("/calibrate",l)};return a(v,{children:a("div",{className:"mr-auto flex justify-center",children:s("div",{className:"card card-calibrate card-compact lg:w-1/2 w-5/6 bg-white border shadow-sm p-2 m-2 ",children:[d.message&&a("div",{className:"alert flex justify-center",children:a("span",{children:d.message})}),s("div",{className:"flex gap-2 justify-center mt-2 mb-4",children:[a("div",{className:"",children:a("button",{className:u==="ph"?"btn btn-yellow w-12":"btn btn-outline-yellow w-12",onClick:()=>b("ph"),children:"ph"})}),a("div",{className:"",children:a("button",{className:u==="tds"?"btn btn-yellow w-12":"btn btn-outline-yellow w-12",onClick:()=>b("tds"),children:"tds"})}),a("div",{className:"",children:a("button",{className:u==="suhu"?"btn btn-yellow w-12":"btn btn-outline-yellow w-12",onClick:()=>b("suhu"),children:"Suhu"})}),a("div",{className:"",children:a("button",{className:u==="sal"?"btn btn-yellow w-12":"btn btn-outline-yellow w-12",onClick:()=>b("sal"),children:"sal"})}),a("div",{className:"",children:a("button",{className:u==="amo"?"btn btn-yellow w-12":"btn btn-outline-yellow w-12",onClick:()=>b("amo"),children:"amo"})})]}),R(),s("div",{className:"",children:[s("div",{className:"flex gap-2",children:[r>=M?"":a("button",{className:"btn btn-circle btn-sm btn-outline",onClick:()=>H(),children:"+"}),r<=3?"":a("button",{className:"btn btn-circle btn-sm btn-outline",onClick:()=>V(),children:"-"})]}),a("div",{className:T==!0?"grid grid-cols-5 text-center mt-3":"hidden",children:s("div",{className:"col-span-5 p-3 ml-auto mr-auto border min-w-full rounded-md bg-slate-50",children:[s("div",{className:"flex justify-between p-2",children:[a("h2",{className:"uppercase font-bold",children:"Rumus"}),a("button",{className:"btn btn-sm",onClick:()=>W(),children:a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:a("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s("div",{className:"grid grid-cols-5",children:[a("div",{className:"col-span-2 border p-2",children:"y"}),s("div",{className:"col-span-3 border p-2 bg-green text-gray-50",children:[p," + ",f,"x"]})]})]})}),s("div",{className:"",children:[a("button",{className:"btn btn-sm w-full mt-4",onClick:()=>X(),children:"Calibrate"}),p&&f?a("button",{className:"btn btn-sm w-full btn-info mt-4",onClick:()=>Y(),children:"Save"}):""]})]})]})})})},z=q;function oa(d){return a(v,{children:s("div",{className:"bg-body",children:[a(K,{title:d.title}),a(O,{auth:d.auth,active:d.active}),a(Q,{}),a("div",{className:"lg:p-6 mr-auto",children:a(z,{notif:d.flash})}),a($,{})]})})}export{oa as default};
